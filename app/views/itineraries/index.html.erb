
<%= render "shared/form_normal_search" %>

<div class="itineraries-card">

  <% @itineraries.each do |itinerary| %>

    <div class="itinerary-card">
      <div class= "itinerary-photo">
        <% if itinerary.activities.present? %>
          <% if itinerary.activities.first.photo.key.present? %>
            <%= cl_image_tag itinerary.activities.first.photo.key, width: 170, height: 150, crop: :fill, class: "activity-photo picture-left" %>
            <%= cl_image_tag itinerary.activities.second.photo.key, width: 170, height: 150, crop: :fill, class: "activity-photo picture-right" %>
          <% end %>
        <% end %>
      </div>
      <div class="itinerary-card-info">
        <div class="itinerary-header-card" data-controller="favorite-heart">
          <%= link_to "#{itinerary.title}", itinerary_path(itinerary), class: "itinerary-title" %>
          <div class="itinerary-btn">
            <%= link_to "See more", itinerary_path(itinerary), class: "btn-blue" %>
            <% if current_user.saved_itineraries.include?(itinerary) %>
              <i class="fa-solid fa-heart" data-fav=<%= itinerary.favorites.find_by_user_id(current_user).id %> data-favorite-heart-target="fav" data-itinerary=<%= itinerary.id %> data-user=<%= current_user.id %> data-action="click->favorite-heart#updateFav"></i>
            <% else %>
                <i class="far fa-heart" data-favorite-heart-target="fav" data-itinerary=<%= itinerary.id %> data-user=<%= current_user.id %> data-action="click->favorite-heart#updateFav"></i>
            <% end %>
          </div>
        </div>
        <div class="itinerary-description-card">
            <p>
              <i class="fa-solid fa-train"></i>
              <%= itinerary.station.name %>
            </p>
            <p>
              <i class="fa-solid fa-star"></i>
              <%= itinerary.rating %>
              <i class="fa-solid fa-comment"></i>
              <%= itinerary.reviews.count %> Reviews
            </p>
            <p>
              <i class="fa-solid fa-clock"></i>
              <%= itinerary.duration %>
              <%= itinerary.price %>.
              <% if itinerary.sunny == true  %>
                <i class="fa-solid fa-sun"></i>
              <% end  %>
              <% if itinerary.rainy == true  %>
                <i class="fa-solid fa-cloud-rain"></i>
              <% end  %>
              <% if itinerary.cloudy == true  %>
                <i class="fa-solid fa-cloud-sun"></i>
              <% end  %>

            </p>
        </div> <%# itinerary-description-card %>
      </div> <%# itinerary-card-info %>
    </div> <%# itinerary-card %>
  <% end %>

</div>
